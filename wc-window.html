<link rel="import" href="http://www.polymer-project.org/1.0/components/polymer/polymer.html">
<link rel="import" href="wc-pelicula.html">
<dom-module id="wc-window">
    <template>
        <style>
        #marco {
            margin: 20px;
            padding: 20px;
            text-align: center;
            border-style: solid;
            border-radius: 8px;
            background-color: lightgreen;
        }
        </style>
        <div id="marco">
            <h1>Taquilla</h1>
            <div id="c" on-wc-movie-session="onSession">
                <template is="dom-repeat" items="{{movies}}" as="movie">
                    <h3>Película:</h3>
                    <wc-pelicula film="{{movie.film}}" director="{{movie.director}}" anio="{{movie.anio}}">
                    </wc-pelicula>
                </template>
            </div>
        </div>
    </template>
    <script>
    (function() {
        Polymer({
            is: "wc-window",
            properties: {
                kiosk: {
                    type: Object,
                    value: function() {
                        return {};
                    }
                },
                movies: {
                    type: Array,
                    // notify : true,
                }

            },
            ready: function(){
                console.log("Las películas son", this.movies);
            },

            //this.fire("wc_ev", {})
            /*ready: function() {
                var film = this.$.film;
                film.textContent = "American Psycho";
                var horario = this.$.horario;
                horario.textContent = "18:00";
                var pago = this.$.pago;
                pago.textContent = "Pagar";
                var price = this.$.price;
                price.textContent = "6€";*/
            /* ready: function() {
                 var movie =this.$.marco.getEffectiveChildren();
                    var add = Polymer.dom(movie).querySelector("ses1");
                    add.addEventListener("click")
             }*/
            onSession: function(e) {
                //this.listen(this, "click", "onClick");
                var film = e.detail.film;
                var session = e.detail.session;

                /*var peliculas = Polymer.dom(this).querySelectorAll("wc-pelicula");
                console.log("El pol es", peliculas);
                peliculas.forEach(function(pelicula) {
                    pelicula.addEventListener("click", function(tar) {
                        var target = tar.target;
                        var session = target.value;
                        console.log("Session es", session);*/
                var ticket = new Ticket();
                ticket.film = film;
                ticket.session = session;
                this.kiosk.addTicket(ticket);
            },
        });
    })();
    </script>
</dom-module>
